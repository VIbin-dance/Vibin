<div class="videoPlayer">
  <div id="player"></div>
  <div class="text">
  <h4><%= title %></h4>
    <p><%= choreographer %></p>
    <p><%= level[0] %></p><br>
    <button id="speedUp" onclick="speedUp()" type="button" class="chosen-value">&uarr; Speed</button>
    <button id="speedDown" onclick="speedDown()" type="button" class="chosen-value">&darr; Speed</button>
    <button id="mirror" onclick="mirrorVideo()" type="button" class="chosen-value">Mirror</button>
    <button id="unmirror" onclick="unmirrorVideo()" type="button" class="chosen-value">Unmirror</button>
  </div>
</div>

<script>
  var tag = document.createElement('script');

  tag.src = "https://www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  var player;
  function onYouTubeIframeAPIReady() {
    player = new YT.Player('player', {
      videoId: '<%= id %>',
      playerVars: {
        rel: 0,
      }
    });
  }
  function speedUp() {
    let rate = player.getPlaybackRate();
    player.setPlaybackRate(rate + 0.25);
    document.getElementById('speed').innerHTML = rate;
  }

  function speedDown() {
    let rate = player.getPlaybackRate();
    player.setPlaybackRate(rate - 0.25);
    document.getElementById('speed').innerHTML = rate;
  }

  function mirrorVideo() {
    document.getElementById('player').setAttribute("class", "mirror");
  }

  function unmirrorVideo() {
    document.getElementById('player').setAttribute("class", "");
  }
</script>
<style>
  .mirror {
    transform: rotateY(180deg);
    -webkit-transform: rotateY(180deg);
    /* Safari and Chrome */
    -moz-transform: rotateY(180deg);
    /* Firefox */
  }
</style>